(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-coupon"],{1506:function(t,i,e){var a=e("c9a4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("4f06").default;o("230b7910",a,!0,{sourceMap:!1,shadowMode:!1})},"37cd":function(t,i,e){"use strict";e.r(i);var a=e("8985"),o=e("db24");for(var n in o)"default"!==n&&function(t){e.d(i,t,function(){return o[t]})}(n);e("ecb9");var s=e("2877"),c=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,"cf4712a2",null);i["default"]=c.exports},"88f0":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=a(e("cebc")),n=a(e("f1e9")),s=a(e("e34a")),c=e("2f62"),u={components:{uniLoadMore:n.default,empty:s.default},data:function(){return{navList:[{state:"1",text:"可使用"},{state:"2",text:"已过期"},{state:"3",text:"已使用"}],tabCurrentIndex:0,isExpired:!1,isUsed:!1,pageNo:1,pageSize:10,coupons:[],total:0,loadingType:""}},onLoad:function(t){this.tabClick(0)},onReachBottom:function(){"more"===this.loadingType&&(this.pageNo=this.pageNo+1,this.searchCoupon(this.isExpired,this.isUsed))},computed:(0,o.default)({},(0,c.mapState)(["hasLogin","userInfo","footPrint"])),methods:{tabClick:function(t){this.tabCurrentIndex=t,this.resetPage(),0==t?(this.isExpired=!1,this.isUsed=!1):1==t?(this.isExpired=!0,this.isUsed=!1):2==t&&(this.isExpired=!1,this.isUsed=!0),this.searchCoupon(this.isExpired,this.isUsed)},searchCoupon:function(t,i){var e=this,a=["USER","IS_EXPIRED","IS_USED"];i&&(a=["USER","IS_USED"]);var o={keyArray:a,userUuid:this.userInfo.userUuid,expired:t,used:i,startIndex:(this.pageNo-1)*this.pageSize,pageSize:this.pageSize};this.loadingType="loading",this.$api.request.userCoupon(o,function(t){if("0"===t.body.status.statusCode){var i=t.body.data.userCoupons;e.coupons=e.coupons.concat(i),e.total=t.body.data.total,e.loadingType=e.coupons.length>=e.total?"noMore":"more"}else e.loadingType="more"},!0)},resetPage:function(){this.coupons=[],this.total=0,this.pageNo=1}}};i.default=u},8985:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"navbar"},t._l(t.navList,function(i,a){return e("v-uni-view",{key:a,staticClass:"nav-item",class:{current:t.tabCurrentIndex===a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabClick(a)}}},[t._v(t._s(i.text))])}),1),"loading"!=t.loadingType&&0===t.coupons.length?e("empty"):t._e(),t.coupons.length>0?e("v-uni-view",[e("v-uni-view",{staticClass:"coupon-list"},t._l(t.coupons,function(i){return e("v-uni-view",{staticClass:"coupon-list_item"},[e("v-uni-view",{staticClass:"coupon-left"},[e("v-uni-image",{attrs:{src:i.couponDTO.imageUrl}})],1),e("v-uni-view",{staticClass:"coupon-right",attrs:{bindtap:"checkbox"}},[e("v-uni-view",{staticClass:"name"},[e("v-uni-text",[t._v(t._s(i.couponDTO.name))])],1),e("v-uni-view",{staticClass:"stock"},["0"==i.couponDTO.benefitType?e("v-uni-text",[t._v("所有商品")]):t._e(),"1"==i.couponDTO.benefitType?e("v-uni-text",[t._v("指定商品")]):t._e()],1),e("v-uni-view",{staticClass:"valid"},[i.couponDTO.conditionAmount>0?e("v-uni-text",[t._v("满"+t._s(i.couponDTO.conditionAmount)+"元可用")]):e("v-uni-text",[t._v("无金额限制")])],1),e("v-uni-view",{staticClass:"valid"},[e("v-uni-text",[t._v(t._s(i.endDate)+"到期")])],1),t.isExpired?e("v-uni-image",{attrs:{src:"../../static/image/expired.png",mode:"aspectFill"}}):t._e(),t.isUsed?e("v-uni-image",{attrs:{src:"../../static/image/used.png",mode:"aspectFill"}}):t._e()],1)],1)}),1),e("uni-load-more",{attrs:{status:t.loadingType}})],1):t._e()],1)},o=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return o})},c9a4:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */uni-page-body[data-v-cf4712a2]{background:#f8f8f8}.navbar[data-v-cf4712a2]{display:-webkit-box;display:-webkit-flex;display:flex;height:40px;padding:0 5px;background:#fff;box-shadow:0 1px 5px rgba(0,0,0,.06);position:relative;z-index:10}.navbar .nav-item[data-v-cf4712a2]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:100%;font-size:15px;color:#303133;position:relative}.navbar .nav-item.current[data-v-cf4712a2]{color:#fa436a}.navbar .nav-item.current[data-v-cf4712a2]:after{content:"";position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:44px;height:0;border-bottom:2px solid #fa436a}\n/* 列表 */.coupon-list[data-v-cf4712a2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:0 %?30?%;border-radius:%?20?%}.coupon-list .coupon-list_item[data-v-cf4712a2]{width:100%;height:110px;margin:%?10?% 0;background-color:#fff;border-radius:5px}.coupon-list .coupon-list_item .coupon-left[data-v-cf4712a2]{float:left;width:45%;height:100%;padding:%?10?%}.coupon-list .coupon-list_item .coupon-left uni-image[data-v-cf4712a2]{width:100%;height:100%;opacity:1}.coupon-list .coupon-list_item .coupon-right[data-v-cf4712a2]{position:relative;padding:%?10?%;width:55%;float:left;border-radius:0 10px 10px 0}.coupon-list .coupon-list_item .coupon-right .name[data-v-cf4712a2]{color:#303133;font-size:%?32?%}.coupon-list .coupon-list_item .coupon-right .valid[data-v-cf4712a2]{color:#909399;font-size:%?28?%;line-height:%?40?%}.coupon-list .coupon-list_item .coupon-right .stock[data-v-cf4712a2]{color:#909399;font-size:%?28?%;line-height:%?40?%;margin-top:%?10?%}.coupon-list .coupon-list_item .coupon-right uni-image[data-v-cf4712a2]{position:absolute;top:%?10?%;right:%?10?%;height:%?100?%;width:%?100?%}body.?%PAGE?%[data-v-cf4712a2]{background:#f8f8f8}',""])},db24:function(t,i,e){"use strict";e.r(i);var a=e("88f0"),o=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);i["default"]=o.a},ecb9:function(t,i,e){"use strict";var a=e("1506"),o=e.n(a);o.a}}]);