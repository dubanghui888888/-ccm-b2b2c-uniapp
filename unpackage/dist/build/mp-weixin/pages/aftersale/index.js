(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/aftersale/index"],{"438b":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i})},"53be":function(e,t,a){"use strict";a.r(t);var r=a("438b"),i=a("6552");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("9fb2");var n=a("2877"),s=Object(n["a"])(i["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},"5ac5":function(e,t,a){"use strict";(function(e){a("542b"),a("921b");r(a("66fd"));var t=r(a("53be"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},6552:function(e,t,a){"use strict";a.r(t);var r=a("ed0e"),i=a.n(r);for(var o in r)"default"!==o&&function(e){a.d(t,e,function(){return r[e]})}(o);t["default"]=i.a},"9fb2":function(e,t,a){"use strict";var r=a("a007"),i=a.n(r);i.a},a007:function(e,t,a){},ed0e:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a("2f62");function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){o(e,t,a[t])})}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=function(){return a.e("components/robby-image-upload/robby-image-upload").then(a.bind(null,"54f0"))},s={components:{robbyImageUpload:n},data:function(){return{editModel:!1,saleNo:"",afterSale:{},orderNo:"",order:{},afterSaleType:"1",afterSaleAmount:0,afterSaleDescription:"",formData:{},header:{},imageUrlList:[],uploadUrl:this.$api.request.apiBaseUrl+"uploadSingleFile"}},onLoad:function(e){this.orderNo=e.orderNo,this.saleNo=e.saleNo,this.orderNo&&this.inquiryOrder(this.orderNo),this.saleNo&&(this.editModel=!0,this.inquiryOrderAfterSale(this.saleNo))},computed:i({},(0,r.mapState)(["hasLogin","userInfo"])),methods:{radioChange:function(e){this.afterSaleType=e.detail.value},inquiryOrderAfterSale:function(e){var t=this;this.$api.request.afterSalesInfo({saleNo:e},function(e){"0"===e.body.status.statusCode?(t.afterSale=e.body.data,t.imageUrlList=t.afterSale.imageUrlList,t.afterSaleAmount=t.afterSale.afterSaleAmount,t.afterSaleType=t.afterSale.afterSaleType,t.afterSaleDescription=t.afterSale.afterSaleDescription,t.order=t.afterSale.orderDTO):t.$api.msg(e.body.status.errorDesc)})},apply:function(){var t=this;if(this.afterSaleAmount<=0||this.afterSaleAmount>this.order.productAmount)this.$api.msg("退款金额有误");else if(0!==this.imageUrlList.length){var a={afterSaleType:this.afterSaleType,afterSaleAmount:this.afterSaleAmount,afterSaleDescription:this.afterSaleDescription,imageUrlList:this.imageUrlList,orderDTO:{orderNo:this.orderNo}};this.$api.request.applyAfterSale(a,function(a){"0"===a.body.status.statusCode?(t.$api.msg("退款申请已提交"),setTimeout(function(){e.navigateTo({url:"/pages/aftersale/list"})},1e3)):t.$api.msg(a.body.status.errorDesc)})}else this.$api.msg("未上传凭证")},update:function(){var t=this;if(this.afterSaleAmount<=0||this.afterSaleAmount>this.order.productAmount)this.$api.msg("退款金额有误");else if(0!==this.imageUrlList.length){var a={afterSaleType:this.afterSaleType,afterSaleAmount:this.afterSaleAmount,afterSaleDescription:this.afterSaleDescription,imageUrlList:this.imageUrlList,saleNo:this.saleNo};this.$api.request.updateAfterSale(a,function(a){"0"===a.body.status.statusCode?(t.$api.msg("退款单已修改"),setTimeout(function(){e.navigateTo({url:"/pages/aftersale/list"})},1e3)):t.$api.msg(a.body.status.errorDesc)})}else this.$api.msg("未上传凭证")},inquiryOrder:function(e){var t=this;this.$api.request.orderDetail({orderNo:e},function(e){"0"===e.body.status.statusCode?(t.order=e.body.data,t.afterSaleAmount=t.order.productAmount):t.$api.msg(e.body.status.errorDesc)})},navProductDetail:function(t){e.navigateTo({url:"/pages/product/product?id="+t.productDTO.productUuid})}}};t.default=s}).call(this,a("543d")["default"])}},[["5ac5","common/runtime","common/vendor"]]]);