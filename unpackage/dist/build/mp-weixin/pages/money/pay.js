(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/money/pay"],{"1d9d":function(e,t,r){"use strict";r.r(t);var o=r("3aeb"),s=r("de04");for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);r("a0b2");var a=r("2877"),i=Object(a["a"])(s["default"],o["a"],o["b"],!1,null,null,null);t["default"]=i.exports},"3aeb":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},s=[];r.d(t,"a",function(){return o}),r.d(t,"b",function(){return s})},"4c97":function(e,t,r){},"9de2":function(e,t,r){"use strict";(function(e){r("542b"),r("921b");o(r("66fd"));var t=o(r("1d9d"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},a0b2:function(e,t,r){"use strict";var o=r("4c97"),s=r.n(o);s.a},b77e:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r("2f62");function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={data:function(){return{payType:1,orderNo:"",pOrderNo:"",order:{},suscribeMsgList:[]}},computed:s({},(0,o.mapState)(["hasLogin","userInfo","footPrint","applicationConfig"])),onLoad:function(e){this.orderNo=e.orderNo,this.pOrderNo=e.pOrderNo,this.orderNo?this.inquiryOrder(this.orderNo):this.pOrderNo&&this.inquiryPOrder(this.pOrderNo),this.inquirySuscribeMsg()},methods:{changePayType:function(e){this.payType=e},confirmWx:function(){e.requestSubscribeMessage({tmplIds:this.suscribeMsgList,success:function(e){console.log("订单模板消息订阅成功")}}),1===this.payType?this.wechatPay():2===this.payType?this.alipayPay():3===this.payType&&this.balancePay()},confirm:function(){1===this.payType?this.wechatPay():2===this.payType?this.alipayPay():3===this.payType&&this.balancePay()},wechatPay:function(){var t=this;e.login({provider:"weixin",success:function(r){console.log(r.code),t.$api.request.wechatPay({orderNo:t.orderNo,pOrderNo:t.pOrderNo,code:r.code},function(t){if("0"===t.body.status.statusCode){var r=t.body.data;console.log(t.body.data),e.requestPayment({provider:"wxpay",timeStamp:r.timestamp,nonceStr:r.nonceStr,package:r.packageStr,signType:"MD5",paySign:r.signature,success:function(t){e.redirectTo({url:"/pages/money/paySuccess"})},fail:function(e){console.log("fail:"+JSON.stringify(e))}})}else console.log(t.body.status.errorDesc)})}})},alipayPay:function(){e.redirectTo({url:"/pages/money/paySuccess"})},balancePay:function(){var t=this;this.$api.request.balancePay({orderNo:this.orderNo,pOrderNo:this.pOrderNo,paymentMethod:this.payType},function(r){"0"===r.body.status.statusCode?e.redirectTo({url:"/pages/money/paySuccess"}):t.$api.msg(r.body.status.errorDesc)})},inquiryPOrder:function(e){var t=this;this.$api.request.orderPaymentAmount({pOrderNo:e},function(e){"0"===e.body.status.statusCode?t.order=e.body.data:console.log(e.body.status.errorDesc)})},inquiryOrder:function(e){var t=this;this.$api.request.orderDetail({orderNo:e},function(e){"0"===e.body.status.statusCode?t.order=e.body.data:console.log(e.body.status.errorDesc)})},inquirySuscribeMsg:function(){var e=this;this.$api.request.wxSuscribeMsg({},function(t){"0"===t.body.status.statusCode?e.suscribeMsgList=t.body.data.suscribeMsgList:console.log(t.body.status.errorDesc)})}}};t.default=a}).call(this,r("543d")["default"])},de04:function(e,t,r){"use strict";r.r(t);var o=r("b77e"),s=r.n(o);for(var n in o)"default"!==n&&function(e){r.d(t,e,function(){return o[e]})}(n);t["default"]=s.a}},[["9de2","common/runtime","common/vendor"]]]);