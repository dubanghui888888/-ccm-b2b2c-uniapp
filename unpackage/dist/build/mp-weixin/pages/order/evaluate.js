(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/evaluate"],{"16ea":function(t,e,r){"use strict";r.r(e);var o=r("e7d5"),n=r.n(o);for(var u in o)"default"!==u&&function(t){r.d(e,t,function(){return o[t]})}(u);e["default"]=n.a},"1c9a":function(t,e,r){},4676:function(t,e,r){"use strict";r.r(e);var o=r("b327"),n=r("16ea");for(var u in n)"default"!==u&&function(t){r.d(e,t,function(){return n[t]})}(u);r("d112");var i=r("2877"),a=Object(i["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=a.exports},"4fd5":function(t,e,r){"use strict";(function(t){r("542b"),r("921b");o(r("66fd"));var e=o(r("4676"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},b327:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];r.d(e,"a",function(){return o}),r.d(e,"b",function(){return n})},d112:function(t,e,r){"use strict";var o=r("1c9a"),n=r.n(o);n.a},e7d5:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r("2f62");function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){u(t,e,r[e])})}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=function(){return r.e("components/robby-image-upload/robby-image-upload").then(r.bind(null,"54f0"))},a={components:{robbyImageUpload:i},data:function(){return{orderNo:"",order:{},orderProductList:[],uploadUrl:this.$api.request.apiBaseUrl+"uploadSingleFile",formData:{},header:{}}},onLoad:function(t){this.orderNo=t.orderNo,this.inquiryOrder(this.orderNo)},computed:n({},(0,o.mapState)(["hasLogin","userInfo"])),methods:{inquiryOrder:function(t){var e=this;this.$api.request.orderDetail({orderNo:t},function(t){"0"===t.body.status.statusCode?(e.order=t.body.data,e.orderProductList=e.order.orderProductDTOList,e.initProductEvaluation(e.orderProductList)):console.log(t.body.status.errorDesc)})},initProductEvaluation:function(t){var e=this,r=[];t.forEach(function(t,o){e.$set(t,"stars",[1,1,1,1,1]),e.$set(t,"commentRank",5),e.$set(t,"imageUrlList",[]),r.push(t)}),this.orderProductList=r},changeProductRank:function(t,e){for(var r=[0,0,0,0,0],o=0;o<=4;o++)o<=e?r.splice(o,1,1):r.splice(o,1,0);this.$set(this.orderProductList[t],"stars",r),this.$set(this.orderProductList[t],"commentRank",e+1)},evaluate:function(){var e=this,r=this,o=[];this.orderProductList.forEach(function(t,e){var n={commentContent:t.comment,commentRank:t.commentRank,orderUuid:r.order.orderUuid,productUuid:t.productDTO.productUuid,imageUrlList:t.imageUrlList};o.push(n)}),this.$api.request.commentOrder({actionType:"ADD",commentList:o},function(r){"0"===r.body.status.statusCode?(e.$api.msg("订单评价成功"),setTimeout(function(){t.navigateTo({url:"/pages/order/order"})},1e3)):console.log(r.body.status.errorDesc)})}}};e.default=a}).call(this,r("543d")["default"])}},[["4fd5","common/runtime","common/vendor"]]]);