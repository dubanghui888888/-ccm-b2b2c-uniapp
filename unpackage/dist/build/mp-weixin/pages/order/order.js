(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{6928:function(e,t,r){"use strict";(function(e){r("542b"),r("921b");n(r("66fd"));var t=n(r("ef5b"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"71a0":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(r("08b4"));var n=r("2f62");function a(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(){return r.e("components/uni-load-more/uni-load-more").then(r.bind(null,"f1e9"))},u=function(){return r.e("components/empty").then(r.bind(null,"e34a"))},d={components:{uniLoadMore:i,empty:u},data:function(){return{orderList:[],pageNo:1,pageSize:10,tabCurrentIndex:0,loadingType:"",navList:[{state:"",text:"全部",loadingType:"more",orderList:[]},{state:"0",text:"待付款",loadingType:"more",orderList:[]},{state:"1",text:"待发货",loadingType:"more",orderList:[]},{state:"2",text:"待收货",loadingType:"more",orderList:[]},{state:"3",text:"待评价",loadingType:"more",orderList:[]}]}},onLoad:function(e){this.tabCurrentIndex=Number(e.state),this.searchOrder(this.translateTabIndex(this.tabCurrentIndex))},onPullDownRefresh:function(){this.resetPage(),this.searchOrder(this.translateTabIndex(this.tabCurrentIndex))},computed:o({},(0,n.mapState)(["hasLogin","userInfo","footPrint"])),methods:{loadMore:function(){"more"===this.loadingType&&(this.pageNo=this.pageNo+1,this.searchOrder(this.translateTabIndex(this.tabCurrentIndex)))},searchOrder:function(e){var t=this,r=this,n=["USER"],a={userUuid:this.userInfo.userUuid,startIndex:(this.pageNo-1)*this.pageSize,pageSize:this.pageSize};e&&(n.push("ORDERSTATUS"),a.orderStatus=e),a.keyArray=n,this.loadingType="loading",this.$api.request.searchOrder(a,function(e){if("0"===e.body.status.statusCode){var n=e.body.data.orders,a=e.body.data.total,o=t.orderList;n.forEach(function(e,t){var n=r.$api.util.translateOrderStatus(e.orderStatus);e.orderStatusDesc=n.orderStatusDesc,e.orderStatusColor=n.orderStatusColor,o.push(e)}),t.orderList=o,t.orderList.length>=a?t.loadingType="noMore":t.loadingType="more"}else console.log(e.body.status.errorDesc)},!0)},translateTabIndex:function(e){var t="";switch(e){case 0:t="";break;case 1:t="0";break;case 2:t="1";break;case 3:t="2";break;case 4:t="3";break}return t},changeTab:function(e){this.tabCurrentIndex=e.target.current,this.resetPage(),this.searchOrder(this.translateTabIndex(this.tabCurrentIndex))},tabClick:function(e){this.tabCurrentIndex=e},deleteOrder:function(t){var r=this,n=this;e.showModal({content:"确认要删除订单吗？",success:function(e){e.confirm&&r.$api.request.delOrder({actionType:"DELETE",orderNo:t.orderNo},function(e){"0"===e.body.status.statusCode?(n.$api.msg("订单已成功删除"),n.resetPage(),n.searchOrder(n.translateTabIndex(n.tabCurrentIndex))):n.$api.msg(e.body.status.errorDesc)},!1)}})},resetPage:function(){this.pageNo=1,this.orderList=[]},cancelOrder:function(t){var r=this,n=this,a="确认要取消订单吗？";e.showModal({content:a,success:function(e){e.confirm&&r.$api.request.cancelOrder({orderNo:t.orderNo},function(e){"0"===e.body.status.statusCode?(n.$api.msg("订单已成功取消"),n.resetPage(),n.searchOrder(n.translateTabIndex(n.tabCurrentIndex))):n.$api.msg(e.body.status.errorDesc)},!1)}})},pay:function(t){e.navigateTo({url:"/pages/money/pay?orderNo="+t.orderNo})},receive:function(t){var r=this,n=this;e.showModal({content:"确认已收货吗？",success:function(e){e.confirm&&r.$api.request.confirmOrder({orderNo:t.orderNo},function(e){"0"===e.body.status.statusCode?(n.$api.msg("确认收货成功"),setTimeout(function(){},1e3)):n.$api.msg(e.body.status.errorDesc)},!1)}})},evaluate:function(t){e.navigateTo({url:"/pages/order/evaluate?orderNo="+t.orderNo})},navProductDetail:function(t){e.navigateTo({url:"/pages/product/product?id="+t.productDTO.productUuid})},applyAfterSale:function(t){e.showModal({content:"发起退款前请与客服仔细沟通, 达成一致后再发起退款申请, 是否继续申请退款？",success:function(r){r.confirm&&e.navigateTo({url:"/pages/aftersale/index?orderNo="+t.orderNo})}})},viewAfterSale:function(t){e.navigateTo({url:"/pages/aftersale/detail?id="+t.afterSaleNo})},viewOrder:function(t){e.navigateTo({url:"/pages/order/detail?orderNo="+t.orderNo})}}};t.default=d}).call(this,r("543d")["default"])},"821b":function(e,t,r){},beae:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a})},bf42:function(e,t,r){"use strict";var n=r("821b"),a=r.n(n);a.a},dad6:function(e,t,r){"use strict";r.r(t);var n=r("71a0"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},ef5b:function(e,t,r){"use strict";r.r(t);var n=r("beae"),a=r("dad6");for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);r("bf42");var s=r("2877"),i=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=i.exports}},[["6928","common/runtime","common/vendor"]]]);