(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"12cf":function(t,e,s){"use strict";s.r(e);var i=s("2a12"),o=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);e["default"]=o.a},"2a12":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(s("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,s,i,o,r,a){try{var n=t[r](a),c=n.value}catch(d){return void s(d)}n.done?e(c):Promise.resolve(c).then(i,o)}function a(t){return function(){var e=this,s=arguments;return new Promise(function(i,o){var a=t.apply(e,s);function n(t){r(a,i,o,n,c,"next",t)}function c(t){r(a,i,o,n,c,"throw",t)}n(void 0)})}}var n=function(){return s.e("components/uni-load-more/uni-load-more").then(s.bind(null,"f1e9"))},c={components:{uniLoadMore:n},data:function(){return{cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,priceOrder:0,cateList:[],goodsList:[],total:0,pageNo:1,pageSize:5,sortBy:"updateDate",sort:"desc",searchKey:""}},onLoad:function(t){this.cateId=t.cateId,t.cateList?this.cateList=JSON.parse(unescape(t.cateList)):this.inquiryProductCate(),this.searchKey=t.searchKey,this.searchBrand=t.brandId,this.searchMerchant=t.merchantId,this.searchProduct()},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.resetPage(),this.searchProduct()},onReachBottom:function(){"more"===this.loadingType&&(this.pageNo=this.pageNo+1,this.searchProduct())},methods:{inquiryProductCate:function(){var t=this;this.$api.request.productCate({},function(e){"0"===e.body.status.statusCode?t.cateList=e.body.data.cates:console.log(e.body.status.errorDesc)},!0)},searchProduct:function(){var e=this,s=[];this.cateId&&s.push("PRODUCT_CATE"),this.searchKey&&s.push("PRODUCT_NAME"),this.searchBrand&&s.push("BRAND"),this.searchMerchant&&s.push("MERCHANT");var i={keyArray:s,productCateUuid:this.cateId,productName:this.searchKey,productBrandUuid:this.searchBrand,merchantUuid:this.searchMerchant,startIndex:(this.pageNo-1)*this.pageSize,pageSize:this.pageSize,sortBy:this.sortBy,sort:this.sort};this.loadingType="loading",this.$api.request.goodsList(i,function(s){if(t.stopPullDownRefresh(),"0"===s.body.status.statusCode){var i=s.body.data.products;e.goodsList=e.goodsList.concat(i),e.total=s.body.data.total,e.goodsList.length>=e.total?e.loadingType="noMore":e.loadingType="more"}else e.loadingType="more",console.log(s.body.status.errorDesc)},!0)},loadData:function(){var e=a(i.default.mark(function e(){var s,o,r,a=this,n=arguments;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=n.length>0&&void 0!==n[0]?n[0]:"add",o=n.length>1?n[1]:void 0,"add"!==s){e.next=8;break}if("nomore"!==this.loadingType){e.next=5;break}return e.abrupt("return");case 5:this.loadingType="loading",e.next=9;break;case 8:this.loadingType="more";case 9:return e.next=11,this.$api.json("goodsList");case 11:r=e.sent,"refresh"===s&&(this.goodsList=[]),1===this.filterIndex&&r.sort(function(t,e){return e.sales-t.sales}),2===this.filterIndex&&r.sort(function(t,e){return 1==a.priceOrder?t.price-e.price:e.price-t.price}),this.goodsList=this.goodsList.concat(r),this.loadingType=this.goodsList.length>20?"nomore":"more","refresh"===s&&(1==o?t.hideLoading():t.stopPullDownRefresh());case 18:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),resetPage:function(){this.pageNo=1,this.goodsList=[]},tabClick:function(e){this.filterIndex===e&&2!==e||(this.filterIndex=e,this.priceOrder=2===e?1===this.priceOrder?2:1:0,t.pageScrollTo({duration:300,scrollTop:0}),this.resetPage(),0===this.filterIndex?(this.sortBy="updateDate",this.sort="desc"):1===this.filterIndex?(this.sortBy="soldUnit",this.sort="desc"):2===this.filterIndex&&(this.sortBy="unitPrice",1==this.priceOrder?this.sort="asc":2==this.priceOrder&&(this.sort="desc")),this.searchProduct())},toggleCateMask:function(t){var e=this,s="show"===t?10:300,i="show"===t?1:0;this.cateMaskState=2,setTimeout(function(){e.cateMaskState=i},s)},changeCate:function(e){this.cateId=e.productCateUuid,this.toggleCateMask(),t.pageScrollTo({duration:300,scrollTop:0}),this.resetPage();var s={keyArray:["PRODUCT_CATE"],productCateUuid:this.cateId,sortBy:"updateDate",sort:"desc",startIndex:(this.pageNo-1)*this.pageSize,pageSize:this.pageSize};this.searchProduct(s)},navToDetailPage:function(e){var s=e.productUuid;t.navigateTo({url:"/pages/product/product?id="+s})},stopPrevent:function(){}}};e.default=c}).call(this,s("543d")["default"])},"2e61":function(t,e,s){"use strict";(function(t){s("542b"),s("921b");i(s("66fd"));var e=i(s("ed66"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},"50c2":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},o=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return o})},8586:function(t,e,s){"use strict";var i=s("aa00"),o=s.n(i);o.a},aa00:function(t,e,s){},ed66:function(t,e,s){"use strict";s.r(e);var i=s("50c2"),o=s("12cf");for(var r in o)"default"!==r&&function(t){s.d(e,t,function(){return o[t]})}(r);s("8586");var a=s("2877"),n=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,null,null);e["default"]=n.exports}},[["2e61","common/runtime","common/vendor"]]]);