(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"249c":function(t,o,e){},"2de9":function(t,o,e){"use strict";var u=e("249c"),r=e.n(u);r.a},"56c1":function(t,o,e){"use strict";var u=function(){var t=this,o=t.$createElement;t._self._c},r=[];e.d(o,"a",function(){return u}),e.d(o,"b",function(){return r})},"874b":function(t,o,e){"use strict";e.r(o);var u=e("c99c"),r=e.n(u);for(var s in u)"default"!==s&&function(t){e.d(o,t,function(){return u[t]})}(s);o["default"]=r.a},c99c:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u=e("2f62");function r(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{},u=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),u.forEach(function(o){s(t,o,e[o])})}return t}function s(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var n=function(){return e.e("components/uni-number-box").then(e.bind(null,"f062"))},c=function(){return e.e("components/uni-badge/uni-badge").then(e.bind(null,"742d"))},i=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"bc88"))},d=function(){return e.e("components/share/shareByWx").then(e.bind(null,"2cfa"))},a={components:{uniNumberBox:n,uniBadge:c,uniPopup:i,shareByWx:d},data:function(){return{id:"",unit:1,product:{unitPrice:0,unitPriceStandard:0,soldUnit:0,totalUnit:0,productMainImage:{},productImages:[],attrList:[]},productSku:{},cartNum:0,isProductCollected:!1,specClass:"none",specSelected:[],favorite:!0,type:"",commentList:[],totalComment:0,stars:[0,0,0,0,0]}},onLoad:function(t){var o=t.id;o&&(this.id=o,this.inquiryProduct(o),this.hasLogin&&(this.checkProductCollected(this.userInfo.userUuid,o),this.inquiryCartNum()),this.searchProductComment(o))},computed:r({},(0,u.mapState)(["hasLogin","userInfo"]),{shareHref:function(){var t=getCurrentPages(),o=t[t.length-1];return this.$api.request.apiBaseUrl.replace("/b2c/rest/","")+"/#/"+o.route+"?id="+this.product.productUuid}}),onShareAppMessage:function(t){return{title:this.product.productName,imageUrl:this.product.productMainImage.url,path:"/pages/product/product?id="+this.product.productUuid}},methods:r({},(0,u.mapMutations)(["login","addFootPrint"]),{togglePopup:function(t,o){var e=this;switch(t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.type=t,this.$nextTick(function(){e.$refs["show"+o].open()})},closeShare:function(){this.$refs.showshare.close()},closeAttr:function(){this.$refs.showattr.close()},cancel:function(t){this.$refs.showshare.close()},change:function(t){console.log("是否打开:"+t.show)},checkProductCollected:function(t,o){var e=this,u={productDTO:{productUuid:o},userDTO:{userUuid:t}};this.$api.request.isProductCollected(u,function(t){"0"===t.body.status.statusCode?e.isProductCollected=t.body.data.productCollected:console.log(t.body.status.errorDesc)},!0)},collectProduct:function(t,o){var e={productDTO:{productUuid:o},userDTO:{userUuid:t}};this.$api.request.collectProduct(e,function(t){"0"===t.body.status.statusCode?console.log("商品已收藏"):console.log(t.body.status.errorDesc)},!0)},cancelCollectProduct:function(t,o){var e={productDTO:{productUuid:o},userDTO:{userUuid:t}};this.$api.request.cancelCollectProduct(e,function(t){"0"===t.body.status.statusCode?console.log("已取消商品收藏"):console.log(t.body.status.errorDesc)},!0)},inquiryCartNum:function(){var t=this,o={userUuid:this.userInfo.userUuid};this.$api.request.getCartNum(o,function(o){"0"===o.body.status.statusCode?t.cartNum=o.body.data.unit:console.log(o.body.status.errorDesc)})},inquiryProduct:function(t){var o=this,e={productUuid:t};this.$api.request.goodsDetail(e,function(t){"0"===t.body.status.statusCode?(o.product=t.body.data,o.product.skuEnabled&&(o.productSku=o.product.skuList[0]),o.addFootPrint(o.product)):console.log(t.body.status.errorDesc)})},searchProductComment:function(t){var o=this,e={keyArray:["PRODUCTUUID"],productUuid:t,startIndex:0,pageSize:1};this.$api.request.goodsComment(e,function(t){"0"===t.body.status.statusCode?(o.commentList=t.body.data.commentList,o.totalComment=t.body.data.total):console.log(t.body.status.errorDesc)})},toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout(function(){t.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t){this.productSku=t},numberChange:function(t){this.unit=t.number},share:function(){this.$refs.share.toggleMask()},toFavorite:function(){this.hasLogin&&(this.isProductCollected=!this.isProductCollected,this.isProductCollected?this.collectProduct(this.userInfo.userUuid,this.id):this.cancelCollectProduct(this.userInfo.userUuid,this.id))},buy:function(){var o={unit:this.unit,userDTO:{userUuid:this.userInfo.userUuid}};this.product.skuEnabled?o.productSkuDTO={productSkuUuid:this.productSku.productSkuUuid}:o.productDTO={productUuid:this.product.productUuid},this.$api.request.addCart(o,function(o){"0"===o.body.status.statusCode?t.navigateTo({url:"/pages/order/createOrder?data="+JSON.stringify(o.body.data.shoppingCartUuid)}):console.log(o.body.status.errorDesc)})},addCart:function(){var t=this,o={unit:this.unit,userDTO:{userUuid:this.userInfo.userUuid}};this.product.skuEnabled?o.productSkuDTO={productSkuUuid:this.productSku.productSkuUuid}:o.productDTO={productUuid:this.product.productUuid},this.$api.request.addCart(o,function(o){"0"===o.body.status.statusCode?t.inquiryCartNum():console.log(o.body.status.errorDesc)})},navTo:function(o){t.navigateTo({url:o})},previewImage:function(o){var e=[];e.push(o),t.previewImage({current:o,indicator:"number",loop:"true",urls:e})},stopPrevent:function(){}})};o.default=a}).call(this,e("543d")["default"])},cd97:function(t,o,e){"use strict";e.r(o);var u=e("56c1"),r=e("874b");for(var s in r)"default"!==s&&function(t){e.d(o,t,function(){return r[t]})}(s);e("2de9");var n=e("2877"),c=Object(n["a"])(r["default"],u["a"],u["b"],!1,null,null,null);o["default"]=c.exports},e08c:function(t,o,e){"use strict";(function(t){e("542b"),e("921b");u(e("66fd"));var o=u(e("cd97"));function u(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])}},[["e08c","common/runtime","common/vendor"]]]);