(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/seckill"],{"81cf":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("2f62");function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function(){return n.e("components/uni-countdown/uni-countdown").then(n.bind(null,"8081"))},c=function(){return n.e("components/uni-number-box").then(n.bind(null,"f062"))},s=function(){return n.e("components/uni-badge/uni-badge").then(n.bind(null,"742d"))},a=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"bc88"))},l={components:{uniNumberBox:c,uniBadge:s,uniPopup:a,uniCountdown:r},data:function(){return{id:"",unit:1,seckill:{},secKillCountDown:"",actionFlag:!1,endFlag:!1,interval:null,product:{unitPrice:0,unitPriceStandard:0,soldUnit:0,totalUnit:0,productMainImage:{},productImages:[],attrList:[]},productSku:{},cartNum:0,isProductCollected:!1,specClass:"none",specSelected:[],favorite:!0,type:"",commentList:[],totalComment:0,stars:[0,0,0,0,0]}},onLoad:function(t){var e=t.id;e&&(this.id=e,this.inquirySeckill(e))},computed:u({},(0,o.mapState)(["hasLogin","userInfo"]),{shareHref:function(){var t=getCurrentPages(),e=t[t.length-1];return this.$api.request.apiBaseUrl.replace("/b2c/rest/","")+"/#/"+e.route+"?id="+this.product.productUuid}}),methods:u({},(0,o.mapMutations)(["login","addFootPrint"]),{togglePopup:function(t,e){var n=this;switch(t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.type=t,this.$nextTick(function(){n.$refs["show"+e].open()})},closeShare:function(){this.$refs.showshare.close()},closeAttr:function(){this.$refs.showattr.close()},cancel:function(t){this.$refs.showshare.close()},change:function(t){console.log("是否打开:"+t.show)},inquirySeckill:function(t){var e=this,n={secKillProductUuid:t};this.$api.request.secKillDetail(n,function(t){if("0"===t.body.status.statusCode){e.seckill=t.body.data;var n=e.$api.util.getCountDownTimes(e.seckill.startTime);e.secKillCountDown={days:n[0],hours:n[1],minutes:n[2],seconds:n[3]},e.product=e.seckill.productDTO,e.product.skuEnabled&&(e.productSku=e.product.skuList[0]),e.checkFlag()}else console.log(t.body.status.errorDesc)})},checkFlag:function(){var t=this;t.interval=setInterval(function(){var e=t.seckill.endTime,n=new Date(Date.parse(e.replace(/-/g,"/")));n<new Date&&(t.endFlag=!0);var o=t.seckill.startTime,u=new Date(Date.parse(o.replace(/-/g,"/")));u<=new Date&&(t.actionFlag=!0)},1e3)},toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout(function(){t.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t){this.productSku=t},buy:function(){var e=this,n={userDTO:{userUuid:this.userInfo.userUuid},secKillProduct:{secKillProductUuid:this.id}};this.$api.request.seckillQuanId(n,function(n){if("0"===n.body.status.statusCode){var o=n.body.data.quanlificationId;t.navigateTo({url:"/pages/order/createSecKillOrder?quanId="+o+"&seckillId="+e.id+"&productId="+e.product.productUuid+"&productSkuId="+e.productSku.productSkuUuid})}else e.$api.msg(n.body.status.errorDesc)})},navTo:function(e){t.navigateTo({url:e})},previewImage:function(e){var n=[];n.push(e),t.previewImage({current:e,indicator:"number",loop:"true",urls:n})},stopPrevent:function(){}}),onUnload:function(){this.interval&&window.clearInterval(this.interval)}};e.default=l}).call(this,n("543d")["default"])},8229:function(t,e,n){"use strict";n.r(e);var o=n("81cf"),u=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=u.a},"8ae7":function(t,e,n){"use strict";n.r(e);var o=n("e47f"),u=n("8229");for(var i in u)"default"!==i&&function(t){n.d(e,t,function(){return u[t]})}(i);n("e01b");var r=n("2877"),c=Object(r["a"])(u["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},c235:function(t,e,n){},e01b:function(t,e,n){"use strict";var o=n("c235"),u=n.n(o);u.a},e47f:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},u=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u})},f629:function(t,e,n){"use strict";(function(t){n("542b"),n("921b");o(n("66fd"));var e=o(n("8ae7"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["f629","common/runtime","common/vendor"]]]);